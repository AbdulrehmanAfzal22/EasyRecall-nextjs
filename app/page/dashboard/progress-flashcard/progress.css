/* progress.css — full replacement with dark/light theme support */

/* ─── CSS Variables ────────────────────────────────────────────────────── */

:root {
  --fcp-bg-page:            #f8f7ff;

  --fcp-empty-card-bg:      #ffffff;
  --fcp-empty-card-border:  rgba(0, 0, 0, 0.08);
  --fcp-empty-h2:           #0f172a;
  --fcp-empty-p:            #64748b;

  --fcp-hero-bg:            #ffffff;
  --fcp-hero-border:        rgba(0, 0, 0, 0.07);

  --fcp-ring-track:         rgba(0, 0, 0, 0.07);
  --fcp-ring-tag:           #94a3b8;

  --fcp-stat-bg:            rgba(0, 0, 0, 0.03);
  --fcp-stat-border:        rgba(0, 0, 0, 0.07);
  --fcp-stat-highlight-bg:  rgba(16, 185, 129, 0.07);
  --fcp-stat-highlight-bdr: rgba(16, 185, 129, 0.2);
  --fcp-stat-num:           #0f172a;
  --fcp-stat-label:         #94a3b8;

  --fcp-section-bg:         #ffffff;
  --fcp-section-border:     rgba(0, 0, 0, 0.07);
  --fcp-section-title:      #64748b;
  --fcp-mastery-pct:        #94a3b8;

  --fcp-bar-bg:             rgba(0, 0, 0, 0.06);
  --fcp-bar-unseen:         rgba(0, 0, 0, 0.08);

  --fcp-legend-text:        #64748b;
  --fcp-legend-strong:      #1e293b;
  --fcp-legend-dot-unseen:  #cbd5e1;

  --fcp-tabs-bg:            rgba(0, 0, 0, 0.04);
  --fcp-tabs-border:        rgba(0, 0, 0, 0.07);
  --fcp-tab-color:          #64748b;
  --fcp-tab-hover:          #0f172a;
  --fcp-tab-active-bg:      rgba(99, 102, 241, 0.85);
  --fcp-tab-active-shadow:  rgba(99, 102, 241, 0.3);
  --fcp-tab-active-color:   #ffffff;

  --fcp-ov-card-bg:         #ffffff;
  --fcp-ov-card-border:     rgba(0, 0, 0, 0.07);
  --fcp-ov-label:           #475569;
  --fcp-ov-sub:             #94a3b8;
  --fcp-ov-mini-bar-bg:     rgba(0, 0, 0, 0.06);

  --fcp-breakdown-scrollbar-track: rgba(0, 0, 0, 0.04);
  --fcp-breakdown-scrollbar-thumb: rgba(0, 0, 0, 0.15);

  --fcp-card-row-bg:        rgba(0, 0, 0, 0.02);
  --fcp-card-row-border:    rgba(0, 0, 0, 0.06);
  --fcp-card-row-hover:     rgba(0, 0, 0, 0.05);
  --fcp-row-num:            #cbd5e1;
  --fcp-row-q:              #334155;
  --fcp-row-badge-bg:       rgba(0, 0, 0, 0.04);
  --fcp-row-badge-border:   rgba(0, 0, 0, 0.1);
  --fcp-row-badge-color:    #94a3b8;
}

/* ─── DARK THEME ────────────────────────────────────────────────────────── */

.dark {
  --fcp-bg-page:            #060b18;

  --fcp-empty-card-bg:      rgba(255, 255, 255, 0.03);
  --fcp-empty-card-border:  rgba(255, 255, 255, 0.08);
  --fcp-empty-h2:           #ffffff;
  --fcp-empty-p:            rgba(255, 255, 255, 0.45);

  --fcp-hero-bg:            rgba(255, 255, 255, 0.03);
  --fcp-hero-border:        rgba(255, 255, 255, 0.08);

  --fcp-ring-track:         rgba(255, 255, 255, 0.07);
  --fcp-ring-tag:           rgba(255, 255, 255, 0.35);

  --fcp-stat-bg:            rgba(255, 255, 255, 0.04);
  --fcp-stat-border:        rgba(255, 255, 255, 0.07);
  --fcp-stat-highlight-bg:  rgba(16, 185, 129, 0.08);
  --fcp-stat-highlight-bdr: rgba(16, 185, 129, 0.2);
  --fcp-stat-num:           #ffffff;
  --fcp-stat-label:         rgba(255, 255, 255, 0.35);

  --fcp-section-bg:         rgba(255, 255, 255, 0.03);
  --fcp-section-border:     rgba(255, 255, 255, 0.07);
  --fcp-section-title:      rgba(255, 255, 255, 0.55);
  --fcp-mastery-pct:        rgba(255, 255, 255, 0.4);

  --fcp-bar-bg:             rgba(255, 255, 255, 0.06);
  --fcp-bar-unseen:         rgba(255, 255, 255, 0.07);

  --fcp-legend-text:        rgba(255, 255, 255, 0.5);
  --fcp-legend-strong:      rgba(255, 255, 255, 0.75);
  --fcp-legend-dot-unseen:  rgba(255, 255, 255, 0.2);

  --fcp-tabs-bg:            rgba(255, 255, 255, 0.04);
  --fcp-tabs-border:        rgba(255, 255, 255, 0.07);
  --fcp-tab-color:          rgba(255, 255, 255, 0.45);
  --fcp-tab-hover:          rgba(255, 255, 255, 0.7);
  --fcp-tab-active-bg:      rgba(124, 58, 237, 0.55);
  --fcp-tab-active-shadow:  rgba(124, 58, 237, 0.3);
  --fcp-tab-active-color:   #ffffff;

  --fcp-ov-card-bg:         rgba(255, 255, 255, 0.04);
  --fcp-ov-card-border:     rgba(255, 255, 255, 0.07);
  --fcp-ov-label:           rgba(255, 255, 255, 0.65);
  --fcp-ov-sub:             rgba(255, 255, 255, 0.3);
  --fcp-ov-mini-bar-bg:     rgba(255, 255, 255, 0.07);

  --fcp-breakdown-scrollbar-track: rgba(255, 255, 255, 0.04);
  --fcp-breakdown-scrollbar-thumb: rgba(255, 255, 255, 0.12);

  --fcp-card-row-bg:        rgba(255, 255, 255, 0.03);
  --fcp-card-row-border:    rgba(255, 255, 255, 0.06);
  --fcp-card-row-hover:     rgba(255, 255, 255, 0.05);
  --fcp-row-num:            rgba(255, 255, 255, 0.25);
  --fcp-row-q:              rgba(255, 255, 255, 0.7);
  --fcp-row-badge-bg:       rgba(255, 255, 255, 0.04);
  --fcp-row-badge-border:   rgba(255, 255, 255, 0.1);
  --fcp-row-badge-color:    rgba(255, 255, 255, 0.3);
}

/* ── Page ────────────────────────────────────────────────────────────────── */

.fcp-page {
  display: flex;
  flex-direction: column;
  gap: 24px;
  padding-bottom: 60px;
  max-width: 760px;
}

/* ── Empty ──────────────────────────────────────────────────────────────── */

.fcp-empty-page {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
}

.fcp-empty-card {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  padding: 40px;
  background: var(--fcp-empty-card-bg);
  border: 1px solid var(--fcp-empty-card-border);
  border-radius: 24px;
  max-width: 360px;
  transition: background 0.25s ease, border-color 0.25s ease;
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
}

.dark .fcp-empty-card {
  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
}

.fcp-empty-card h2 { font-size: 20px; font-weight: 700; color: var(--fcp-empty-h2); transition: color 0.25s ease; }
.fcp-empty-card p  { font-size: 14px; color: var(--fcp-empty-p); transition: color 0.25s ease; }

/* ── Hero (ring + stats) ────────────────────────────────────────────────── */

.fcp-hero {
  display: flex;
  align-items: center;
  gap: 28px;
  padding: 28px;
  background: var(--fcp-hero-bg);
  border: 1px solid var(--fcp-hero-border);
  border-radius: 20px;
  flex-wrap: wrap;
  transition: background 0.25s ease, border-color 0.25s ease;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
}

.dark .fcp-hero {
  box-shadow: none;
}

/* Score ring */
.fcp-ring-wrap {
  position: relative;
  width: 120px;
  height: 120px;
  flex-shrink: 0;
}

.fcp-ring-svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.fcp-ring-track {
  fill: none;
  stroke: var(--fcp-ring-track);
  stroke-width: 10;
  transition: stroke 0.25s ease;
}

.fcp-ring-fill {
  fill: none;
  stroke-width: 10;
  stroke-linecap: round;
  transition: stroke-dashoffset 0.9s cubic-bezier(0.4, 0, 0.2, 1), stroke 0.25s ease;
}

.fcp-ring-inner {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.fcp-ring-pct {
  font-size: 28px;
  font-weight: 800;
  line-height: 1;
  letter-spacing: -1px;
  transition: color 0.25s ease;
}

.fcp-ring-tag {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--fcp-ring-tag);
  margin-top: 3px;
  transition: color 0.25s ease;
}

/* Stat grid */
.fcp-stat-grid {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  min-width: 220px;
}

.fcp-stat {
  display: flex;
  flex-direction: column;
  gap: 3px;
  padding: 14px 16px;
  background: var(--fcp-stat-bg);
  border: 1px solid var(--fcp-stat-border);
  border-radius: 14px;
  transition: background 0.25s ease, border-color 0.25s ease;
}

.fcp-stat--highlight {
  background: var(--fcp-stat-highlight-bg);
  border-color: var(--fcp-stat-highlight-bdr);
}

.fcp-stat-num {
  font-size: 26px;
  font-weight: 800;
  color: var(--fcp-stat-num);
  line-height: 1;
  transition: color 0.25s ease;
}

.fcp-stat-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--fcp-stat-label);
  transition: color 0.25s ease;
}

/* ── Section ────────────────────────────────────────────────────────────── */

.fcp-section {
  padding: 22px 24px;
  background: var(--fcp-section-bg);
  border: 1px solid var(--fcp-section-border);
  border-radius: 18px;
  display: flex;
  flex-direction: column;
  gap: 14px;
  transition: background 0.25s ease, border-color 0.25s ease;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
}

.dark .fcp-section {
  box-shadow: none;
}

.fcp-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 6px;
}

.fcp-section-title {
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--fcp-section-title);
  transition: color 0.25s ease;
}

.fcp-mastery-pct {
  font-size: 13px;
  font-weight: 600;
  color: var(--fcp-mastery-pct);
  transition: color 0.25s ease;
}

/* Mastery bar */
.fcp-bar {
  height: 12px;
  background: var(--fcp-bar-bg);
  border-radius: 99px;
  overflow: hidden;
  display: flex;
  transition: background 0.25s ease;
}

.fcp-bar-seg {
  height: 100%;
  transition: width 0.7s cubic-bezier(0.4, 0, 0.2, 1);
}

.fcp-bar-seg--unseen {
  background: var(--fcp-bar-unseen);
  transition: background 0.25s ease, width 0.7s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Legend */
.fcp-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 14px;
}

.fcp-legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--fcp-legend-text);
  transition: color 0.25s ease;
}

.fcp-legend-item strong {
  color: var(--fcp-legend-strong);
  transition: color 0.25s ease;
}

.fcp-legend-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.fcp-legend-dot--unseen {
  background: var(--fcp-legend-dot-unseen);
  transition: background 0.25s ease;
}

/* ── Tabs ────────────────────────────────────────────────────────────────── */

.fcp-tabs {
  display: flex;
  gap: 4px;
  background: var(--fcp-tabs-bg);
  border: 1px solid var(--fcp-tabs-border);
  border-radius: 14px;
  padding: 4px;
  width: fit-content;
  transition: background 0.25s ease, border-color 0.25s ease;
}

.fcp-tab {
  background: none;
  border: none;
  font-family: inherit;
  font-size: 13px;
  font-weight: 600;
  color: var(--fcp-tab-color);
  padding: 9px 20px;
  border-radius: 11px;
  cursor: pointer;
  transition: all 0.18s ease;
}

.fcp-tab:hover { color: var(--fcp-tab-hover); }

.fcp-tab--active {
  background: var(--fcp-tab-active-bg);
  color: var(--fcp-tab-active-color);
  box-shadow: 0 3px 14px var(--fcp-tab-active-shadow);
}

/* ── Overview grid ──────────────────────────────────────────────────────── */

.fcp-overview-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 14px;
}

.fcp-ov-card {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  padding: 20px 14px 16px;
  background: var(--fcp-ov-card-bg);
  border: 1px solid var(--fcp-ov-card-border);
  border-radius: 18px;
  overflow: hidden;
  text-align: center;
  transition: background 0.25s ease, border-color 0.25s ease;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
}

.dark .fcp-ov-card {
  box-shadow: none;
}

.fcp-ov-top-bar {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
}

.fcp-ov-emoji  { font-size: 26px; margin-top: 4px; }
.fcp-ov-count  { font-size: 32px; font-weight: 800; color: var(--rc); line-height: 1; }
.fcp-ov-label  { font-size: 12px; font-weight: 700; color: var(--fcp-ov-label); text-transform: uppercase; letter-spacing: 0.05em; transition: color 0.25s ease; }
.fcp-ov-sub    { font-size: 11px; color: var(--fcp-ov-sub); margin-top: 2px; transition: color 0.25s ease; }

.fcp-ov-mini-bar {
  width: 100%;
  height: 4px;
  background: var(--fcp-ov-mini-bar-bg);
  border-radius: 99px;
  overflow: hidden;
  margin-top: 8px;
  transition: background 0.25s ease;
}

/* ── Breakdown list ─────────────────────────────────────────────────────── */

.fcp-breakdown {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 420px;
  overflow-y: auto;
  padding-right: 4px;
}

.fcp-breakdown::-webkit-scrollbar { width: 4px; }
.fcp-breakdown::-webkit-scrollbar-track {
  background: var(--fcp-breakdown-scrollbar-track);
  border-radius: 99px;
}
.fcp-breakdown::-webkit-scrollbar-thumb {
  background: var(--fcp-breakdown-scrollbar-thumb);
  border-radius: 99px;
}

.fcp-card-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: var(--fcp-card-row-bg);
  border: 1px solid var(--fcp-card-row-border);
  border-radius: 12px;
  transition: background 0.15s ease, border-color 0.25s ease;
}

.fcp-card-row:hover { background: var(--fcp-card-row-hover); }

.fcp-row-num {
  font-size: 11px;
  font-weight: 700;
  color: var(--fcp-row-num);
  min-width: 22px;
  transition: color 0.25s ease;
}

.fcp-row-q {
  flex: 1;
  font-size: 13px;
  color: var(--fcp-row-q);
  line-height: 1.4;
  transition: color 0.25s ease;
}

.fcp-row-badge {
  flex-shrink: 0;
  font-size: 11px;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 50px;
  border: 1px solid var(--fcp-row-badge-border);
  color: var(--fcp-row-badge-color);
  background: var(--fcp-row-badge-bg);
  white-space: nowrap;
  transition: background 0.25s ease, border-color 0.25s ease, color 0.25s ease;
}

/* ── Actions ─────────────────────────────────────────────────────────────── */

.fcp-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  padding-top: 4px;
}

/* ── Responsive ─────────────────────────────────────────────────────────── */

@media (max-width: 560px) {
  .fcp-hero { flex-direction: column; align-items: flex-start; }
  .fcp-ring-wrap { width: 100px; height: 100px; }
  .fcp-ring-pct { font-size: 22px; }
  .fcp-stat-grid { grid-template-columns: 1fr 1fr; min-width: unset; width: 100%; }
  .fcp-overview-grid { grid-template-columns: 1fr; }
  .fcp-ov-card { flex-direction: row; gap: 12px; text-align: left; padding: 14px 16px; }
  .fcp-ov-top-bar { display: none; }
  .fcp-ov-emoji { font-size: 22px; margin-top: 0; }
  .fcp-ov-mini-bar { display: none; }
  .fcp-actions { flex-direction: column; }
  .fcp-actions .ci-btn { width: 100%; justify-content: center; }
}